#------------------------------------------------------------------------------
# Makefile for dvr board shared sound library
# 13.07.01 by phoong
#------------------------------------------------------------------------------

include $(MCFW_ROOT_PATH)/makerules/common_header_a8.mk
INCLUDE_DIR = -I.
LIB_DIR = ../../../lib
SRC_DIR = ../../

.SUFFIXES:


CFLAGS =

LIB=libsnd_db_gui.so

DEL=rm -f

#------------------------------------------------------------------------------
OBJS = snd_db.o
#------------------------------------------------------------------------------

%.o: %.c
	$(CC) -fPIC -c $(CFLAGS) $< -o $@

.PHONY:	all \
		clean

all: mkwav $(LIB)
	-@mv $(LIB) $(LIB_DIR)
	-@mv snd_db.h $(SRC_DIR)/inc/ucx_db_snd.h
	-@$(DEL) *.o *.h
	@echo -e "\n--- make sound db done! (`date +'%H:%M:%S'`)---\n"

$(LIB): $(OBJS)
	@echo --- make $(LIB) ---
	$(LD) -shared -o $@ $^

mkwav:
	-@./wav2db.out ./wav .

clean:
	-$(DEL) *.o
#	-$(DEL) $(LIB_DIR)/$(LIB)
